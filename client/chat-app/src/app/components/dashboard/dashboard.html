<div class="wireframe">
  <!-- Header -->
  <div class="header">
    <div>
      <strong>Chat System</strong>
      <span class="role-badge" [ngClass]="getRoleBadgeClass()">{{ getRoleText() }}</span>
    </div>
    <div>
      Welcome, {{ currentUser?.username }} | 
      <button class="btn btn-outline-light btn-sm" (click)="logout()">Logout</button>
    </div>
  </div>
  
  <!-- Main Content -->
  <div class="main-content">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="section-title">My Groups</div>
      <div 
        *ngFor="let group of groups" 
        class="list-item"
        [class.active]="selectedGroup?.id === group.id"
        (click)="selectGroup(group)">
        {{ group.name }}
        <span *ngIf="isGroupAdmin() && group.createdBy === currentUser?.id" class="text-muted"> (Owner)</span>
      </div>
      
      <div class="section-title mt-3">Channels</div>
      <div 
        *ngFor="let channel of channels" 
        class="list-item"
        [class.active]="selectedChannel?.id === channel.id"
        (click)="selectChannel(channel)">
        # {{ channel.name }}
      </div>
      
      <!-- Role-specific buttons -->
      <div class="mt-3" *ngIf="isGroupAdmin()">
        <button class="btn btn-success btn-sm w-100 mb-2" data-bs-toggle="modal" data-bs-target="#createGroupModal">
          Create New Group
        </button>
        <button class="btn btn-primary btn-sm w-100" data-bs-toggle="modal" data-bs-target="#createChannelModal" *ngIf="selectedGroup">
          Add Channel
        </button>
      </div>
      
      <div class="mt-3" *ngIf="isRegularUser()">
        <button class="btn btn-outline-primary btn-sm w-100 mb-2">Request Group Access</button>
        <button class="btn btn-outline-danger btn-sm w-100">Leave Group</button>
      </div>
    </div>
    
    <!-- Chat Area -->
    <div class="chat-area">
      <div class="chat-header" *ngIf="selectedChannel">
        <strong>Channel: #{{ selectedChannel.name }}</strong>
        <div class="text-muted small" *ngIf="isRegularUser()">15 members online</div>
      </div>
      
      <div class="messages-container" *ngIf="selectedChannel">
        <div class="message" *ngFor="let message of messages">
          <strong>{{ message.username }}:</strong> {{ message.text }}
        </div>
        <div class="text-center text-muted fst-italic" *ngIf="isRegularUser()">
          --- You have read all messages ---
        </div>
      </div>
      
      <div class="no-channel" *ngIf="!selectedChannel">
        <p class="text-muted">Select a channel to start chatting</p>
      </div>
    </div>
    
    <!-- Admin Panel -->
    <div class="admin-panel" *ngIf="isSuperAdmin()">
      <div class="section-title">Super Admin Tools</div>
      
      <div class="admin-section">
        <strong>User Management</strong>
        <div class="user-list">
          <div *ngFor="let user of users" class="user-item">
            <span>{{ user.username }}</span>
            <div class="user-actions" *ngIf="user.id !== currentUser?.id">
              <button class="btn btn-success btn-xs" (click)="promoteToGroupAdmin(user)">
                Group Admin
              </button>
              <button class="btn btn-success btn-xs" (click)="promoteToSuperAdmin(user)">
                Super Admin
              </button>
              <button class="btn btn-danger btn-xs" (click)="removeUser(user)">
                Remove
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <div class="admin-section">
        <strong>System Overview</strong>
        <div class="system-stats">
          <div class="stat-item">Total Users: {{ users.length }}</div>
          <div class="stat-item">Total Groups: {{ groups.length }}</div>
          <div class="stat-item">Active Channels: {{ channels.length }}</div>
        </div>
      </div>
      
      <div class="admin-section">
        <strong>Reports & Logs</strong>
        <button class="btn btn-outline-primary btn-sm">View Reports</button>
        <button class="btn btn-outline-primary btn-sm">System Logs</button>
      </div>
    </div>
    
    <!-- Group Admin Panel -->
    <div class="admin-panel" *ngIf="isGroupAdmin() && !isSuperAdmin()">
      <div class="section-title">Group Admin Tools</div>
      
      <div class="admin-section" *ngIf="selectedGroup">
        <strong>Group: {{ selectedGroup.name }}</strong>
        <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#createChannelModal">
          Add Channel
        </button>
        <button class="btn btn-outline-primary btn-sm">Manage Members</button>
        <button class="btn btn-danger btn-sm">Delete Channel</button>
      </div>
      
      <div class="admin-section">
        <strong>Member Management</strong>
        <button class="btn btn-success btn-sm">Add User to Group</button>
        <button class="btn btn-danger btn-sm">Remove User</button>
        <button class="btn btn-warning btn-sm">Ban from Channel</button>
      </div>
      
      <div class="admin-section">
        <strong>Requests</strong>
        <div class="request-item">
          new_user wants to join
          <button class="btn btn-success btn-xs ms-2">Approve</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Message Input -->
  <div class="message-input" *ngIf="selectedChannel">
    <input 
      type="text" 
      class="form-control" 
      placeholder="Type your message..."
      [(ngModel)]="messageText"
      (keyup.enter)="sendMessage()">
    <button class="btn btn-primary" (click)="sendMessage()">Send</button>
  </div>
</div>

<!-- Create Group Modal -->
<div class="modal fade" id="createGroupModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Create New Group</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <label class="form-label">Group Name</label>
          <input type="text" class="form-control" [(ngModel)]="newGroupName">
        </div>
        <div class="mb-3">
          <label class="form-label">Description</label>
          <textarea class="form-control" [(ngModel)]="newGroupDescription"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" (click)="createGroup()" data-bs-dismiss="modal">Create Group</button>
      </div>
    </div>
  </div>
</div>

<!-- Create Channel Modal -->
<div class="modal fade" id="createChannelModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Create New Channel</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <label class="form-label">Channel Name</label>
          <input type="text" class="form-control" [(ngModel)]="newChannelName">
        </div>
        <div class="mb-3">
          <label class="form-label">Description</label>
          <textarea class="form-control" [(ngModel)]="newChannelDescription"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" (click)="createChannel()" data-bs-dismiss="modal">Create Channel</button>
      </div>
    </div>
  </div>
</div>
